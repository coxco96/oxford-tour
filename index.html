<!DOCTYPE html>
<html>

<head>
  <title>Oxford Tour</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    h1 {
      font-family: 'Courier New', Courier, monospace;
    }

    #container {
      display: flex;
      flex-direction: row;
      width: 100%;
    }

    #iiif-map {
      height: 100vh;
      width: 80%;
      top: 0;
      bottom: 0;
    }

    #info-column {
      width: 20%;
      color: black;
      background-color: #DFCBB0;
      padding: 1em;
    }

    #current-view {
      position: absolute;
      left: 60px;
      top: 12px;
      z-index: 1000;
      background: whitesmoke;
      padding: 8px 12px;
    }

    #ui {
      position: absolute;
      right: 12px;
      bottom: 12px;
      z-index: 1000;
    }

    .back-and-forth {
      text-decoration: none;
      display: inline-block;
      padding: 8px 16px;
    }

    .back-and-forth:hover {
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
    }

    #previous,
    #next {
      cursor: pointer;
      width: auto;
      color: BLACK;
      font-weight: bold;
      font-size: 18px;
      border-radius: 0 3px 3px 0;
      user-select: none;
    }



    .tour-location {
      display: none;
      font-family: monospace;
    }

    img {
      padding: 10px;
      margin: auto;
    }



    .active {
      background-color: #717171;
    }

    #tour-image {
      width: 96%;
      margin: auto;
      /* height: 50%; */
    }

    #main-image {
      width: 96%;
      margin: auto;
    }
    figcaption {
      text-align: center;
    }
    
  </style>
</head>

<body>
  <div id=container>
    <div id="iiif-map"></div>
    <div id="info-column">
      
      <h1 id="welcome">Take a tour of the city of Oxford and its unviersity.</h1>
      <div id="back-and-forth">
        <a class="back-and-forth" href="#" id="previous" onclick="plusSlides(-1)">&#8249; Previous</a>
        <a class="back-and-forth" href="#" id="next" onclick="plusSlides(1)">Next &#8250;</a>
      </div>
      <figure id="main-image">
      <img id="tour-image" src="images/id1.jpg">
      <figcaption id="image-creds">Image found <a href="#">here</a>.</figcaption>
      </figure>
      

     
      <div class="tour-location">
        <div class="text">first one</div>
      </div>
      <div class="tour-location">
        <div class="text">second one</div>
      </div>
      <div class="tour-location">
        <div class="text">third one</div>
      </div>
      <div class="tour-location">
        <div class="text">fourth one</div>
      </div>
      <div class="tour-location">
        <div class="text">fifth one</div>
      </div>
      <div class="tour-location">
      <div class="text">sixth one</div>
      </div>
      <div class="tour-location">
      <div class="text">seventh one</div>
      </div>
      <div class="tour-location">
      <div class="text">eighth one</div>
      </div>
      <div class="tour-location">
      <div class="text">ninth one</div>
      </div>
      <div class="tour-location">
      <div class="text">tenth one</div>
      </div>
      <div class="tour-location">
      <div class="text">eleventh one</div>
      </div>
      <div class="tour-location">
      <div class="text">twelfth one</div>
      </div>
      


    </div>



    <div id="current-view">
      Current bounds:<br />
      <div id="current-bounds"></div>
    </div>
    <div id="ui">
      <button id="zoom-to-full-screen">Back to full screen map</button>
    </div>




  </div>



  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
  <!-- make sure to import Leaflet-IIIF *after* the main Leaflet package -->
  <script src="https://cdn.rawgit.com/mejackreed/Leaflet-IIIF/v3.0.0/leaflet-iiif.js"></script>
  <script src="oxfordLocations.js"></script>

  <script>
    const map = L.map("iiif-map", {
     // center: [0, 0],
      center: [-274.78, 407.89],
      crs: L.CRS.Simple,
      zoom: 1.2,
      maxZoom: 1,
      zoomSnap: .2
    });

    map.setMaxZoom(3.2);
    //map.setZoom(1.2);

    const chamizalLayer = new L.tileLayer.iiif(
      "https://iiif.digitalcommonwealth.org/iiif/2/commonwealth:k643f906k/info.json"
    ).addTo(map);

  

    map.on("moveend", () => {
      // returns 'southwest_lng,southwest_lat,northeast_lng,northeast_lat' of current view
      const currentBounds = map.getBounds().toBBoxString();

      console.log(map.getCenter());

      // output current bounds to screen
      document.getElementById("current-bounds").innerText = currentBounds;
    });

    document
      .getElementById("zoom-to-full-screen")
      .addEventListener("click", () => {
        map.flyToBounds([
          [-550.49, 0],
          [-71.49, 902],
        ]);
      });



    // logs name of each location
   // for (const key in oxfordLocations.id) {
      //console.log(oxfordLocations.id[key]["latlng"]);
      //console.log(oxfordLocations.id[key]["latlng"])
    //}
  //  let newArr = Object.values(oxfordLocations.id[1]["latlng"]);
  //  console.log(newArr);
  //   console.log(Object.values(newArr));


    let slideIndex = 1;
    showSlides(slideIndex);

    // functions

    // Thumbnail image controls
    function currentSlide(n) {
      showSlides(slideIndex = n);
    }


    function showSlides(n) {
      let i;
      const slides = document.getElementsByClassName("tour-location");


      // how many locations do we have?
      console.log(slides.length);

      if (n > slides.length) {
        slideIndex = 1
      }
      if (n < 1) {
        slideIndex = slides.length
      }
      for (let i = 0; i < slides.length; i++) {
        slides[i].style.display = "none";
      }

      console.log(slideIndex);

      slides[slideIndex - 1].style.display = "block";

      // if we are on first location, take us to the second location on "next" click.
      if (slideIndex == 1) {
        document
          .getElementById("next")
          .addEventListener("click", () => {
            map.flyToBounds([
            Object.values(oxfordLocations.id[2]["latlng"])
            ]);
          }),
          document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[1]["name"]}`;
          document.getElementById("tour-image").src = oxfordLocations.id[1]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[1]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[1]["image"]["credit"]}">here</a>.`

      } else if (slideIndex == 2) {
        document
          .getElementById("next")
          .addEventListener("click", () => {
            map.flyToBounds([
              Object.values(oxfordLocations.id[3]["latlng"])
            ]);
          }),
          document
          .getElementById("previous")
          .addEventListener("click", () => {
            map.flyToBounds([
              Object.values(oxfordLocations.id[1]["latlng"])
            ]);
          }),
          document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[2]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[2]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[2]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[2]["image"]["credit"]}">here</a>.`
      } else if (slideIndex == 3) {
        document
          .getElementById("next")
          .addEventListener("click", () => {
            map.flyToBounds([
              Object.values(oxfordLocations.id[4]["latlng"])
            ]);
          }),
          document
          .getElementById("previous")
          .addEventListener("click", () => {
            map.flyToBounds([
              Object.values(oxfordLocations.id[2]["latlng"])
            ]);
          }),
          document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[3]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[3]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[3]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[3]["image"]["credit"]}">here</a>.`
      } else if (slideIndex == 4) {
        document
          .getElementById("next")
          .addEventListener("click", () => {
            map.flyToBounds([
              Object.values(oxfordLocations.id[5]["latlng"])
            ]);
          }),
          document
          .getElementById("previous")
          .addEventListener("click", () => {
            map.flyToBounds([            
              Object.values(oxfordLocations.id[3]["latlng"])
            ]);
          }),
          document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[4]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[4]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[4]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[4]["image"]["credit"]}">here</a> and was originally taken by Vinesh Rajpaul.`
      } else if (slideIndex == 5) {
        document
          .getElementById("next")
          .addEventListener("click", () => {
            map.flyToBounds([
              Object.values(oxfordLocations.id[6]["latlng"])
            ]);
          }),
          document
          .getElementById("previous")
          .addEventListener("click", () => {
            map.flyToBounds([
              Object.values(oxfordLocations.id[4]["latlng"])
            ]);
          }),
          document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[5]["name"]}`, 
          document.getElementById("tour-image").src = oxfordLocations.id[5]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[5]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[5]["image"]["credit"]}">here</a>.`
      } else if (slideIndex == 6) {
        document
          .getElementById("next")
          .addEventListener("click", () => {
            map.flyToBounds([
              Object.values(oxfordLocations.id[7]["latlng"])
            ]);
          }),
          document
          .getElementById("previous")
          .addEventListener("click", () => {
            map.flyToBounds([
              Object.values(oxfordLocations.id[5]["latlng"])
            ]);
          }),
          document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[6]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[6]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[6]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[6]["image"]["credit"]}">here</a>.`
      } else if (slideIndex == 7) {
        document
        .getElementById("next")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[8]["latlng"])
          ])
        }),
        document
        .getElementById("previous")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[6]["latlng"])
          ])
        }),
        document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[7]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[7]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[7]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[7]["image"]["credit"]}">here</a>, By Meraj Chhaya - Tom Tower in Christ Church College, CC BY 2.0, .`
      } else if (slideIndex == 8) {
        document
        .getElementById("next")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[9]["latlng"])
          ])
        }),
        document
        .getElementById("previous")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[7]["latlng"])
          ])
        }),
        document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[8]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[8]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[8]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[8]["image"]["credit"]}">here</a>.`
      } else if (slideIndex == 9) {
        document
        .getElementById("next")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[10]["latlng"])
          ])
        }),
        document
        .getElementById("previous")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[8]["latlng"])
          ])
        }),
        document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[9]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[9]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[9]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[9]["image"]["credit"]}">here</a>.`
      } else if (slideIndex == 10) {
        document
        .getElementById("next")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[11]["latlng"])
          ])
        }),
        document
        .getElementById("previous")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[9]["latlng"])
          ])
        }),
        document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[10]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[10]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[10]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[10]["image"]["credit"]}">here</a>.`
      } else if (slideIndex == 11) {
        document
        .getElementById("next")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[12]["latlng"])
          ])
        }),
        document
        .getElementById("previous")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[10]["latlng"])
          ])
        }),
        document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[11]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[11]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[11]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[11]["image"]["credit"]}">here</a>.`
      } else if (slideIndex == 12) {
        document
        .getElementById("next")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[1]["latlng"])
          ])
        }),
        document
        .getElementById("previous")
        .addEventListener("click", () => {
          map.flyToBounds([
            Object.values(oxfordLocations.id[11]["latlng"])
          ])
        }),
        document
          .getElementById("welcome").innerHTML = `Welcome to ${oxfordLocations.id[12]["name"]}`,
          document.getElementById("tour-image").src = oxfordLocations.id[12]["image"]["src"];
          document.getElementById("tour-image").alt = oxfordLocations.id[12]["image"]["alt"];
          document.getElementById("image-creds").innerHTML = `Image found <a href="${oxfordLocations.id[12]["image"]["credit"]}">here</a>.`
      }

    }


    // Next/previous controls
    function plusSlides(n) {
      showSlides(slideIndex += n);
    }
  </script>
</body>

</html>